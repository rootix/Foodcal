@if (meal) {
    <nz-card [class.empty]="isNew" [nzActions]="isNew ? [add] : [edit, delete]">
        <div class="card-block">
            <span class="card-tag">{{ meal.type === MealType.Lunch ? 'Mittag' : 'Abend' }}</span>
            <h3 class="card-title">
                @if (!meal.dishes.length) {
                    <span>Kein Menü definiert</span>
                } @else {
                    @for (dish of meal.dishes; track dish.id; let last = $last) {
                        @if (dish.url) {
                            <a href="{{ dish.url }}" target="_blank">{{ dish.name }}</a>
                        } @else {
                            <span>{{ dish.name }}</span>
                        }
                        @if (!last) {
                            <span>, </span>
                        }
                    }
                }
            </h3>
            @if (meal.notes) {
                <p class="card-text">
                    {{ meal.notes }}
                </p>
            }
        </div>
        <ng-template #add>
            <i nz-icon nzType="plus" title="Menu hinzufügen" (click)="createMeal.emit(meal)"></i>
        </ng-template>
        <ng-template #edit>
            <i
                nz-icon
                nzType="edit"
                nzTheme="twotone"
                nzTwotoneColor="#0072a3"
                title="Menu bearbeiten"
                (click)="editMeal.emit(meal)"
            ></i>
        </ng-template>
        <ng-template #delete>
            <i
                nz-icon
                nzType="delete"
                nzTheme="twotone"
                nzTwotoneColor="#f00"
                title="Menu löschen"
                (click)="deleteMeal.emit(meal)"
            ></i>
        </ng-template>
    </nz-card>
}
